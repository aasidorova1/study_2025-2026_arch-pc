---
## Author
author:
  name: Сидорова А.А. 
  degrees: Студент
  student_card: 1032256488
  emai: 1032256488@pfur.ru
  affiliation:
    - name: Российский университет дружбы народов
      faculty: Факультет физико-математических и естественных наук
      department: Кафедра прикладной информатики и теории вероятностей
      city: Москва
      year: 2025

## Title
title: "**ОТЧЕТ ПО ЛАБОРАТОРНОЙ РАБОТЕ № 5**"
subtitle: "*дисциплина: Архитектура компьютера*"
student: "Студент: Сидорова А.А"
Group: "Группа: НБИбд -01-25"
---

# Цель работы 
Приобретение практических навыков работы в Midnight Commander. Освоение инструкций
языка ассемблера mov и int.

# Задание для самостоятельной работы 

1. Создайте копию файла lab5-1.asm. Внесите изменения в программу (без использова-
ния внешнего файла in_out.asm), так чтобы она работала по следующему алгоритму:
• вывести приглашение типа “Введите строку:”;
• ввести строку с клавиатуры;
• вывести введённую строку на экран.
2. Получите исполняемый файл и проверьте его работу. На приглашение ввести строку
введите свою фамилию.
3. Создайте копию файла lab5-2.asm. Исправьте текст программы с использование под-
программ из внешнего файла in_out.asm, так чтобы она работала по следующему
алгоритму:
• вывести приглашение типа “Введите строку:”;
• ввести строку с клавиатуры;
• вывести введённую строку на экран.
Не забудьте, подключаемый файл in_out.asm должен лежать в том же каталоге, что и
файл с программой, в которой он используется.
4. Создайте исполняемый файл и проверьте его работу.

# Теоретическое введение 
## Основы работы с Midnight Commander

Midnight Commander (или просто mc) — это программа, которая позволяет просматривать
структуру каталогов и выполнять основные операции по управлению файловой системой,
т.е. mc является файловым менеджером. Midnight Commander позволяет сделать работу с
файлами более удобной и наглядной.

## Структура программы на языке ассемблера NASM

Программа на языке ассемблера NASM, как правило, состоит из трёх секций: секция кода
программы (SECTION .text), секция инициированных (известных во время компиляции)
данных (SECTION .data) и секция неинициализированных данных (тех, под которые во
время компиляции только отводится память, а значение присваивается в ходе выполнения
программы) (SECTION .bss).

Для объявления инициированных данных в секции .data используются директивы DB, DW,
DD, DQ и DT, которые резервируют память и указывают, какие значения должны храниться в
этой памяти:
• DB (define byte) — определяет переменную размером в 1 байт;
• DW (define word) — определяет переменную размеров в 2 байта (слово);
• DD (define double word) — определяет переменную размером в 4 байта (двойное слово);
• DQ (define quad word) — определяет переменную размером в 8 байт (учетверённое слово);
• DT (define ten bytes) — определяет переменную размером в 10 байт.
Директивы используются для объявления простых переменных и для объявления масси-
вов. Для определения строк принято использовать директиву DB в связи с особенностями
хранения данных в оперативной памяти.

Для объявления неинициированных данных в секции .bss используются директивы resb,
resw, resd и другие, которые сообщают ассемблеру, что необходимо зарезервир овать за-
данное количество ячеек памяти. Примеры их использования приведены в табл.1

|Директива         |Назначение директивы            |Аргумент        |Назначение аргумента 
|------------------|--------------------------------|----------------|---------------------------------------------------------------------------------------------|
|resb              |Резервирование заданного числа однобайтовых ячеек             |string resb 20       |По адресу с меткой string будет расположен массив из 20 однобайтовых ячеек (хранение строки символов)| 
|resw              |Резервирование заданного числа двухбайтовых ячеек (слов)            |count resw 256        |По адресу с меткой count будет расположен массив из 256 двухбайтовых слов|
|resd              |Резервирование заданного числа четырёхбайтовых ячеек (двойных слов)            |x resd 1      |По адресу с меткой x будет расположено одно двойное слово (т.е. 4 байта для хранения большого числа)|


### Описание инструкции mov

Инструкция языка ассемблера mov предназначена для дублирования данных источника в
приёмнике. В общем виде эта инструкция записывается в виде
'mov dst,src'
Здесь операнд dst — приёмник, а src — источник.
В качестве операнда могут выступать регистры (register), ячейки памяти (memory) и непо-
средственные значения (const). В табл.2 приведены варианты использования mov с разны-
ми операндами.

|Тип операндов     |Пример          |Пояснение
|------------------|----------------|-------------------------------------------------------------------------------------|
|mov <reg>,<reg>   |mov eax,ebx     |пересылает значение регистра ebx в регистр eax|
|mov <reg>,<mem>   |mov cx,[eax]    |пересылает в регистр cx значение из памяти, указанной в eax|
|mov <mem>,<reg>   |mov rez,ebx     |пересылает в переменную rez значение из регистра ebx|
|mov <reg>,<const> |mov eax,403045h |пишет в регистр eax значение 403045h|
|mov <mem>,<const> |mov byte[rez],0 |записывает в переменную rez значение 0|


# Порядок выполнения лабораторной работы

1. Я открыла Midnight Commander и с помощью стрелок и клавиши 'Enter' перешла в каталог ~/work/arch-pc созданный
при выполнении лабораторной работы №4 (рис.1)

![рис.1](image/Text1/tex1.png)

2. С помощью функциональной клавищи F7 создала папку lab05 и перешла
в созданный каталог.

![рис.2](image/Text1/tex2.png)

3. С помощью строки ввода и команды touch  создала файл ab5-1.asm (рис.3)

![рис.3](image/Text1/tex3.png)

4. С помощью функциональной клавиши F4 я открыла файл lab5-1.asm для редактирова-
ния во встроенном редакторе mcedit. Я ввела  текст программы из листинга 5.1, сохранила изме-
нения.

![рис.4](image/Text1/tex4.png)

5. С помощью функциональной клавиши F3 я открыла файл lab5-1.asm для просмотра и убедилась, что файл содержит текст программы.(рис.5)

![рис.5](image/Text1/tex5.png)

6. Оттранслировала текст программы lab5-1.asm в объектный файл. Потом выполнила компо-
новку объектного файла и запустила получившийся исполняемый файл. Дальше программа выводит строку 'Введите строку:' и ожидает ввода с клавиатуры. На запрос я ввела своё ФИО. (рис.6-8)

![рис.6](image/Text1/tex6.png)

![рис.7](image/Text1/tex7.png)

![рис.8](image/Text1/tex8.png)

## Подключение внешнего файла in_out.asm

7. Я скачала файл in_out.asm со страницы курса в ТУИС. Проверила что он лежит в том же катадлоге, где и программа. Затем в одной из панелей mc открыла каталог с файлом lab5-1.asm. В другой панели каталог
со скаченным файлом in_out.asm. Скопировала файл in_out.asm в каталог с файлом lab5-1.asm с помощью функциональной клавиши F5.(рис.9-10)

![рис.9](image/Text1/tex9.png)

![рис.10](image/Text1/tex10.png)

8.С помощью функциональной клавиши F6 создала  копию файла lab5-1.asm с именем
lab5-2.asm. Потом я выделила файл lab5-1.asm, нажала клавишу F6 , и ввела имя файла
lab5-2.asm. (рис.11)

![рис.11](image/Text1/tex11.png)

9. Я исправила текст программы в файле lab5-2.asm с использование подпрограмм из
внешнего файла in_out.asm в соответствии с листингом 5.2. Создала исполняемый файл и проверьте его работу. (рис.12-

![рис.12](image/Text1/tex12.png)

![рис.13](image/Text1/tex13.png)

![рис.14](image/Text1/tex14.png)

10.В файле lab5-2.asm я заменила подпрограмму sprintLF на sprint. Потом создала исполняе-
мый файл и проверила его работу.Теперь вывод происходит в одну строку, а не в две. (рис.15-16) 

![рис.15](image/Text1/tex15.png)

![рис.16](image/Text1/tex16.png)

# Задание для самостоятельной работы 

1. Я создала копию файла lab5-1.asm с именем lab5-1-.asm.copy. В новом файле я изменила текст программы без использования внешнего файла так, чтобы кроме вывода текста и ввода после него, также выводилась введённая строка. (рис.17)
 
![рис.17](image/Text1/tex17.png)

2. Потом я оттранслировала текст программы lab5-1-.asm.copy в объектный файл, выполнила компоновку этого файла и запустила получившийся файл, введя свою фамилию и имя. (рис.18)

![рис.18](image/Text1/tex18.png)

3. Я создала копию файла lab5-2.asm с именем lab5-2.asm.copy. В новом файле я изменила текст программы без использования внешнего файла так, чтобы кроме вывода текста и ввода в  конце дополнительно выводилась введённая строка. (рис.19)

![рис.19](image/Text1/tex19.png)

4. Потом я оттранслировала текст программы lab5-1-.asm.copy в объектный файл

![рис.20](image/Text1/tex20.png)

# Вывод 

При выполнении данной работы я приобрела практические навыки  работы с Midnight Commander, а также я освоила инструкции языка ассемблера mov и int.
